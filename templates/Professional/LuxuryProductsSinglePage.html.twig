{% extends 'layouts/arqonz_updated_layout.html.twig' %}

{% block content %}
<link rel="stylesheet" href="/static/css/ArqonzWebsite-Pages.css">

<div class="productsPageMain">
    <div class="ProductsHero">
        <div class="productGallery">

            <div class="productSlider">
        {% if product.getProductImage() and product.getProductImage().getItems()|length > 0 %}
            {% for item in product.getProductImage().getItems() %}
                <div class="slide">
                    {% if item.getImage().getMimeType() starts with 'video/' %}
                        <video controls>
                            <source src="{{ item.getImage().getFullPath() }}" type="{{ item.getImage().getMimeType() }}">
                            Your browser does not support the video tag.
                        </video>
                    {% else %}
                        <img src="{{ item.getImage().getThumbnail('galleryCarousel') }}" alt="Product Image">
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
                    <div class="slide">
                        <img src="{{ pimcore_asset_by_path('/Static/DefaultImage.jpeg').getThumbnail('galleryCarousel') }}" alt="Default Product Image">
                    </div>
                {% endif %}
            </div>
            

            <!-- <script>
                let slideIndex = 0;
                showSlides(slideIndex);

                function showSlides(n) {
                    let slides = document.querySelectorAll('.productSlider .slide');
                    let dots = document.querySelectorAll('.dot');
                    if (n >= slides.length) { slideIndex = 0 }
                    if (n < 0) { slideIndex = slides.length - 1 }
                    for (let i = 0; i < slides.length; i++) {
                        slides[i].style.transform = `translateX(-${slideIndex * 100}%)`;
                    }
                    for (let i = 0; i < dots.length; i++) {
                        dots[i].className = dots[i].className.replace(" active", "");
                    }
                    dots[slideIndex].className += " active";
                }

                document.querySelectorAll('.dot').forEach((dot, index) => {
                    dot.addEventListener('click', () => {
                        slideIndex = index;
                        showSlides(slideIndex);
                    });
                });
            </script> -->

            {# <img src="/static/images/Productimages/sampleproduct1.jpg" alt="">
            <img src="/static/images/Productimages/sampleproduct2.jpg" alt="">
            <img src="/static/images/Productimages/sampleproduct3.jpg" alt=""> #}
        </div>
        <div class="productMainDetails">
            <h2>{{ product.getProductName() }}</h2>
            <div class="ProdReviewRatings">
                <img src="/static/icons/ProdStars.svg" alt="">
                <p>(24 Reviews)</p>
            </div>
            
            {# <div class="productPrice"><p>₹ {{ product.getPrice() }} / {{ product.getUnit() }}</p></div> #}
            <div class="productPrice"> <p class="ProductcardPrice" style="justify-content: left;"><span class="ProdPriceRs"><span class="RupeeSymbol">₹</span> <span class="ProductPriceAmt">{{ product.getPrice() }}</span><span class="PriceUnits">{{ product.getUnit() }}</span></p></div>
            <div class="ProdDescSnippet">
                <p>{{ product.getProductDescription()|length > 231 ? product.getProductDescription()|slice(0, 231) ~ '...' : product.getProductDescription() }}</p>
            </div>
            <div class="ProdManufacturer">
                <img src="/static/icons/ProdManufacturer.svg" alt="">
                <p class="blurred-text">  :  VM Manufactures Pvt.Ltd.</p>
            </div>
            <div class="ProdStarSpecifications">
                <p><span class="specLable">Brand</span><span class="SpecValue"> : {{ product.getProductBrand() }}</span></p>
                {# <p><span class="specLable">Size</span><span class="SpecValue"> : 50Kg</span></p> #}
            </div>
            <div class="ProdEnquireNow">
                <a href="#">Enquire Now</a>
            </div>
            
        </div>
    </div>

    
    
    <div class="ProdDescriptionEnquiry">
        <div class="ProductinfDescription">
            <div class="ProductDetailsMenu">
                <a href="" class="Description selected">
                    <img class="DetMenuImage" src="/static/icons/ProductsDescription.svg" alt="">
                    <span class="DetmenuName">Description</span>
                </a>

                <a href="" class="Specification">
                    <img class="DetMenuImage" src="/static/icons/Specifications.svg" alt="">
                    <span class="DetmenuName">Specifications</span>
                </a>
            </div>
            <p class="ProdDataDescription">{{ product.getProductDescription() }}</p>
            <div class="ProdComplSpecifications">
                
                <p>{{ product.getSpecifications() }}</p>
            
                
            </div>

            <div class="productReviewForm">
                <h3>Rate this Product</h3>
                <form id="productReviewForm">
                    <div class="rating">
                        <label for="rating">Rating:</label>
                        <div class="stars">
                            {% for i in 5..1 %}
                                <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}" />
                                <label for="star{{ i }}" title="{{ i }} stars">
                                    &#9733;
                                </label>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="review">
                        <label for="review">Review:</label>
                        <textarea id="review" name="review" rows="4" placeholder="Write your review here..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="fullName">Full Name :</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Enter Name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email :</label>
                        <input type="email" id="email" name="email" placeholder="Enter Email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone :</label>
                        <input type="text" id="phone" name="phone" placeholder="Enter Phone Number" class="form-control">
                    </div>
                    <div class="submit">
                        <input type="submit" value="Submit Review">
                    </div>
                </form>
            </div>
            <script>
                document.getElementById('productReviewForm').addEventListener('submit', function(event) {
                    event.preventDefault();

                    const formData = new FormData(this);

                    formData.append('productUrl', window.location.href);

                    fetch('/product-review-submit', {
                        method: 'POST',
                        body: formData,
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert('Thank you for your review!');
                        } else {
                            alert('There was an issue submitting your review. Please try again.');
                        }
                    })
                    .catch(error => {
                        alert('An error occurred while submitting your review. Please try again.');
                    });
                });
            </script>

            

        
        </div>
        {# Toggle Description and Specification Javascript #}
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const descriptionLink = document.querySelector('.ProductDetailsMenu .Description');
                const specificationLink = document.querySelector('.ProductDetailsMenu .Specification');
                const prodDataDescription = document.querySelector('.ProdDataDescription');
                const prodComplSpecifications = document.querySelector('.ProdComplSpecifications');

                function updateSelection(selectedLink) {
                    // Remove 'selected' class from both links
                    descriptionLink.classList.remove('selected');
                    specificationLink.classList.remove('selected');

                    // Add 'selected' class to the clicked link
                    selectedLink.classList.add('selected');
                }

                function toggleContent(selectedLink) {
                    if (selectedLink.classList.contains('Description')) {
                        // Show the description and hide the specifications
                        prodDataDescription.style.display = 'block';
                        prodComplSpecifications.style.display = 'none';
                    } else if (selectedLink.classList.contains('Specification')) {
                        // Show the specifications and hide the description
                        prodDataDescription.style.display = 'none';
                        prodComplSpecifications.style.display = 'block';
                    }
                }

                // Event listeners for the description and specification links
                descriptionLink.addEventListener('click', function (e) {
                    e.preventDefault(); // Prevent the default anchor behavior
                    updateSelection(descriptionLink);
                    toggleContent(descriptionLink);
                });

                specificationLink.addEventListener('click', function (e) {
                    e.preventDefault(); // Prevent the default anchor behavior
                    updateSelection(specificationLink);
                    toggleContent(specificationLink);
                });
            });
        </script>

        <div class="ProductEnquiryForm">
            <h3>Need Bulk Orders ?</h3>
            <div class="ProdsellerInfo">
                <div class="SellerImage">
                    <img src="/static/icons/boy-avator-1.svg" alt="">
                </div>
                <div class="sellerInfo">
                    <p class="SellerInfoTag">Seller Information</p>
                    <p class="SellerInfoName">Bhojan Sridev Krishnan</p>
                    <p class="SellerInfoDescription">Lorem ipsum, or lipsum as it is sometimes known, is dummy text.</p>
                </div>
            </div>

            <div class="ProdEnquiryFormFields">
                <form id="prodEnquiryForm">
                    {# <label for="fullname">Full Name:</label> #}
                    <input type="text"  style="box-shadow: 0px 3px 20px 0px rgba(0, 0, 0, 0.15);" id="fullname" name="fullname" placeholder="Enter Full Name" required>

                    {# <label for="phonenumber">Phone Number:</label> #}
                    <input type="number" style="box-shadow: 0px 3px 20px 0px rgba(0, 0, 0, 0.15);" id="phonenumber" name="phonenumber" placeholder="Enter Phone Number" required>

                    {# <label for="emailaddress">Email Address:</label> #}
                    <input type="email" style="box-shadow: 0px 3px 20px 0px rgba(0, 0, 0, 0.15);" id="emailaddress" name="emailaddress" placeholder="Enter Email Address" required>

                    <input type="submit" style="background-color: #23262F; color: #fff; font-size: 16px; cursor: pointer; margin-top: 12px;"value="Submit">
                </form>
            </div>
            {# Enquiry Form Submit Script #}
            <script>
                document.getElementById('prodEnquiryForm').addEventListener('submit', function(event) {
                    event.preventDefault();

                    const formData = new FormData(this);

                    // Add the current URL to the form data
                    formData.append('productUrl', window.location.href);

                    fetch('/product-enquiry', {
                        method: 'POST',
                        body: formData,
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert('Your enquiry has been submitted successfully!');
                        } else {
                            alert('There was an issue submitting your enquiry. Please try again.');
                        }
                    })
                    .catch(error => {
                        alert('An error occurred while submitting your enquiry. Please try again.');
                    });
                });
            </script>
        </div>

        
    </div>

    <hr style="border-top: 1px solid #EEF2F5; border-bottom: 0px; margin: 50px 0px;">

    <div class="AdminqueriesSection">
        <div class="AdminEmailSection">
            <div class="AdminQueriesIcon">
                <img src="/static/icons/AdminQueriesEmail.svg" alt="">
            </div>
            <div class="AdminQueriesDetails">
                <p class="AdminQueryLabel">admin@arqonz.com</p>
                <p class="AdminQueryValue">Have query? Mail us.</p>
            </div>
        </div>
        <div class="AdminPhoneSection">
            <div class="AdminQueriesIcon">
                <img src="/static/icons/AdminQueriesPhone.svg" alt="">
            </div>
            <div class="AdminQueriesDetails">
                <p class="AdminQueryLabel">+91 79000 85000 </p>
                <p class="AdminQueryValue">24/7 available</p>
            </div>
        </div>
    </div>
    
    
</div>

{% endblock %}
