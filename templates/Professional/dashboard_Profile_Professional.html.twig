{% extends 'layouts/UserDashboard_layout.html.twig' %}




{% block content %}
    <!-- Add this in the head section of your HTML -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    

    <div class="dashboard-projects">
        <span>
            <span class="Breadcrumb-nonactive"><a href="/en/account/index">Dashboard</a></span><span class="breadcrumb-divider">></span><span class="Breadcrumb-active">Profile</span>
        </span>
    </div>
    <div class="line-8"></div>

    <div class="dashboard-container">
        <div class="left-column">
            <!-- Profile Details -->
            <div class="profile-details">
                <div class="sectionheading">
                    <h2>Profile Details</h2>
                </div>

                <div class="DashProfileMain">

                    {% include 'Professional/Dashboard/DashboardProfileNavigation.html.twig' %}

                    <div class="PersonalProfile">
                        <div class="PersonalProfileFrames">
                            <div class="ProfilePicture"> 
                                {% set profileImage = customer.getProfilePicture() %}
                                <img src="{{ profileImage ? profileImage.getThumbnail('galleryCarousel') : '/static/images/icons/DefaultDP.jpg' }}" 
                                    width="100px" height="100px" alt="Profile Image" class="dashbord-profile-image">
                            </div>
                            <div class="PersonalProfileForm">

                                <form>
                                    <div class="FormRow">
                                        <div class="form-group personalFirstName">
                                            <label for="Prof-Education">Education:</label>
                                            <input type="text" id="Prof-Education" name="Prof-Education" placeholder="{{ Education }}">
                                        </div>

                                        <div class="form-group">
                                            <label for="prof-Specialization">Specialization:</label>
                                            <input type="text" id="prof-Specialization" name="prof-Specialization" placeholder="{{ Specialization }}">
                                        </div>
                                        
                                    </div>

                                    <div class="FormRow">
                                        
                                        <div class="form-group">
                                            <label for="Awards-honors">Awards and Honors:</label>
                                            <input type="text" id="Awards-honors" name="Awards-honors" placeholder="{{ Awards }}">
                                        </div>

                                        <div class="form-group">
                                            <label for="Certification-licences">Certification and licences:</label>
                                            <input type="text" id="Certification-licences" name="Certification-licences" placeholder="{{ Certification }}">
                                        </div>
                                    </div>

                            
                                    <div class="form-group" style="align-items:flex-end;">
                                        <button type="submit">Save</button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>


                
                </div>
            </div>
        </div>

        
    </div>
    
    
    
    



    <script>
    //ADD required Field
    document.addEventListener('DOMContentLoaded', function () {
        var form = document.querySelector('form[name]');
        var requiredFields = form.querySelectorAll('[required]');

        for (var i = 0; i < requiredFields.length; i++) {
        var field = requiredFields[i];
        var label = form.querySelector('label[for="' + field.id + '"]');

        if (label) {
            label.innerHTML += ' <span class="required" style="color:red;">*</span>';
        }
        }
    });
    </script>

    <script type="text/javascript">
    $(document).ready(function() {
    $(".js-select-cities").select2();
    $(".js-select-skills").select2();
    });
    </script>

    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();

            var formData = new FormData(this);
            var loadingOverlay = document.getElementById('loadingOverlay');

            fetch('/account/Profile/Professional-details/save', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert('Profile details saved successfully.');
                    loadingOverlay.style.display = 'none';
                    // Optionally, redirect to another page
                } else {
                    alert('An error occurred while saving your profile details.');
                    loadingOverlay.style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while saving your profile details.');
                loadingOverlay.style.display = 'none';
            });
        });
    </script>

    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();

            var formData = new FormData(this);
            var loadingOverlay = document.getElementById('loadingOverlay');

            fetch('/account/Profile/save', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert('Profile details saved successfully.');
                    loadingOverlay.style.display = 'none';
                    // Optionally, redirect to another page
                } else {
                    alert('An error occurred while saving your profile details.');
                    loadingOverlay.style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while saving your profile details.');
                loadingOverlay.style.display = 'none';
            });
        });
    </script>

{% endblock %}